(function(){"use strict";var t={3902:function(t,e,n){var o=n(9242),s=n(3396),i=n(7139);const r=["onClick"];function l(t,e,n,o,l,a){const c=(0,s.up)("router-view"),u=(0,s.Q2)("focusable");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.rMap,((e,n)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["item",{active:n===t.nowIndex}]),ref_for:!0,ref:"firstRef",onClick:o=>t.go(e.name,n),key:n},[(0,s.Uk)((0,i.zw)(e.text),1)],10,r)),[[u]]))),128))]),(0,s.Wm)(c)],64)}n(7658);var a=n(4870),c=n(2447),u=n(2483),h=(0,s.aZ)({name:"App",setup(){const t=(0,a.iH)(),e=(0,c.n)(),n=(0,u.tv)(),o=(0,u.yj)(),i=(0,a.iH)([{name:"Example",text:"是否可聚焦"},{name:"Example2",text:"事件"},{name:"Example3",text:"滚动DIV"},{name:"Example4",text:"弹出层"},{name:"Example5",text:"自定义配置"},{name:"Example6",text:"双路由"}]),r=(0,a.iH)(i.value.findIndex((t=>t.name===o.name)));(0,s.bv)((()=>{e.onFocus(t.value[r.value])}));const l=(o,i)=>{n.push({name:o}),r.value=i,(0,s.Y3)((()=>e.onFocus(t.value[r.value])))};return{firstRef:t,rMap:i,nowIndex:r,go:l}}}),f=n(89);const d=(0,f.Z)(h,[["render",l]]);var m=d;const p=[{path:"/",name:"Example",component:()=>n.e(443).then(n.bind(n,4589))},{path:"/Example2",name:"Example2",component:()=>n.e(443).then(n.bind(n,6274))},{path:"/Example3",name:"Example3",component:()=>n.e(443).then(n.bind(n,93))},{path:"/Example4",name:"Example4",component:()=>n.e(443).then(n.bind(n,7512))},{path:"/Example5",name:"Example5",component:()=>n.e(443).then(n.bind(n,222))},{path:"/Example6",name:"Example6",component:()=>n.e(443).then(n.bind(n,4421))}],g=(0,u.p7)({history:(0,u.r5)(),routes:p});var v=g,E=n(65),b=(0,E.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});const y=(0,o.ri)(m);y.use(c.Z).use(b).use(v),v.isReady().then((()=>y.mount("#app")))},2447:function(t,e,n){n.d(e,{Z:function(){return p},n:function(){return g}});var o=n(3396),s=n(2482);const i=(t,e)=>{let n=Date.now();return function(...o){const s=Date.now();s-n>=e&&(t.apply(this,o),n=Date.now())}},r=(t,e)=>{const n=t**2,o=e**2,s=n+o,i=Math.sqrt(s);return i},l=t=>"undefined"===typeof t||null===t,a=(t,e,n=window.Event)=>{const{type:o,bubbles:s=!1,cancelable:i=!1,...r}=e;let a;return l(n)?(a=document.createEvent("HTMLEvents"),a.initEvent(o,s,i)):a=new n(o,{bubbles:s,cancelable:i}),Object.assign(a,r),t.dispatchEvent(a)};var c,u;(function(t){t[t["UP"]=38]="UP",t[t["DOWN"]=40]="DOWN",t[t["LEFT"]=37]="LEFT",t[t["RIGHT"]=39]="RIGHT",t[t["ENTER"]=13]="ENTER"})(c||(c={})),function(t){t[t["UP_DOWN"]=1]="UP_DOWN",t[t["LEFT_RIGHT"]=0]="LEFT_RIGHT",t[t["ALL"]=2]="ALL"}(u||(u={}));class h{constructor(){(0,s.Z)(this,"focusClassName",void 0),(0,s.Z)(this,"focusedAttrname",void 0),(0,s.Z)(this,"focusItemAttrname",void 0),(0,s.Z)(this,"scrollItemAttrname",void 0),(0,s.Z)(this,"scrollEl",void 0),(0,s.Z)(this,"limitingEl",void 0),(0,s.Z)(this,"optionalDomMap",void 0),(0,s.Z)(this,"optionalRangeMap",void 0),(0,s.Z)(this,"scrollTimer",void 0),(0,s.Z)(this,"offsetDistance",void 0),(0,s.Z)(this,"isLocalRolling",void 0),(0,s.Z)(this,"distanceToCenter",void 0),(0,s.Z)(this,"longPressFn",void 0),(0,s.Z)(this,"longPressTimer",void 0),(0,s.Z)(this,"isLongPress",void 0),(0,s.Z)(this,"longPress",(()=>{a(this.getFocusEl(),{type:"longPress"}),this.longPressTimer=0,this.isLongPress=!0})),(0,s.Z)(this,"handleDirection",((t,e,n)=>{this.longPressTimer||(this[n](t,e),this.longPressFn=i(this[n],500)),this.longPressTimer=setTimeout((()=>{this.longPressFn&&this.longPressFn(t,e)}))})),(0,s.Z)(this,"checkBelongCurrentScroll",(t=>{let e=null,n=!1;return e=document.querySelectorAll(`[${this.scrollItemAttrname}]`),e.forEach((e=>{e.contains(this.getFocusEl())&&e.contains(t)&&(n=!0)})),e=null,n}));const t=Math.ceil(1e4*Math.random());this.focusClassName="onFocus",this.focusedAttrname="focused",this.focusItemAttrname="focusable"+t,this.scrollItemAttrname="focusable-scroll-"+t,this.scrollEl=document.documentElement||document.body.parentNode,this.optionalDomMap=new Map,this.optionalRangeMap=new Map,this.offsetDistance=30,this.isLocalRolling=!1,this.distanceToCenter=!1,this.isLongPress=!1}getScrollXY(){const t=window.pageYOffset||0,e=window.pageXOffset||0;return{scrollTop:t,scrollLeft:e}}getElementPosition(t){const e=t.getBoundingClientRect(),{scrollTop:n,scrollLeft:o}=this.getScrollXY(),s=e.left+o,i=e.top+n,r={start:s,end:e.width+s},l={start:i,end:e.height+i};return{rangeX:r,rangeY:l}}getFocusEl(){return document.querySelector(`[${this.focusedAttrname}]`)}getElementFocusPosition(){return this.getElementPosition(this.getFocusEl())}createFocusItemMap(){const t=(this.limitingEl?this.limitingEl:document).querySelectorAll(`[${this.focusItemAttrname}]`);t.forEach(((t,e)=>{null===t.getAttribute(this.focusedAttrname)&&this.optionalDomMap.set(this.getElementPosition(t),t)}))}clearData(){this.optionalRangeMap.clear(),this.optionalDomMap.clear()}handlerRecent(t){const e=[...this.optionalRangeMap.keys()],n=e.filter((t=>t.belong)),o=0!==n.length?n:e,s=o.filter((t=>t.overlap)),i=0!==s.length?s:o,r=Math.min(...i.map((t=>t.hypotenuse)));for(const l of this.optionalRangeMap.keys())if(l.hypotenuse===r){const e=this.optionalRangeMap.get(l);if(e){const n=this.optionalDomMap.get(e);this.onFocus(n,!0,t)}break}this.clearData()}handlerUpDown(t,e){this.createFocusItemMap();const{rangeX:n,rangeY:o}=this.getElementFocusPosition(),{start:s,end:i}=n,{start:l,end:c}=o,u=(i-s)/2+s;for(const a of this.optionalDomMap.keys()){const e=a.rangeX.start,n=a.rangeX.end,o=a.rangeY.start,h=a.rangeY.end,f=n>s&&e<i&&h>l&&o<c;if(t&&o>l+(c-l)/2||!t&&l+(c-l)/2>h||f){const f=(n-e)/2+e,d=(h-o)/2+o,m=t?d-l:c-d,p=f-u,g=n>s&&e<i,v=r(Math.abs(m),Math.abs(p)),E=this.checkBelongCurrentScroll(this.optionalDomMap.get(a)),b={hypotenuse:v,overlap:g,belong:E};this.optionalRangeMap.set(b,a)}}if(a(this.getFocusEl(),{type:e}),0===this.optionalRangeMap.size)return this.clearData();a(this.getFocusEl(),{type:"onBlur"}),this.handlerRecent(1)}handlerLeftRight(t,e){this.createFocusItemMap();const{rangeX:n,rangeY:o}=this.getElementFocusPosition(),{start:s,end:i}=n,{start:l,end:c}=o,u=(c-l)/2+l;for(const a of this.optionalDomMap.keys()){const e=a.rangeX.start,n=a.rangeX.end,o=a.rangeY.start,h=a.rangeY.end,f=n>s&&e<i&&h>l&&o<c;if(t&&e>s+(i-s)/2||!t&&s+(i-s)/2>n||f){const f=(n-e)/2+e,d=(h-o)/2+o,m=t?f-s:i-f,p=d-u,g=h>l&&o<c,v=r(Math.abs(p),Math.abs(m)),E=this.checkBelongCurrentScroll(this.optionalDomMap.get(a)),b={hypotenuse:v,overlap:g,belong:E};this.optionalRangeMap.set(b,a)}}if(a(this.getFocusEl(),{type:e}),0===this.optionalRangeMap.size)return this.clearData();a(this.getFocusEl(),{type:"onBlur"}),this.handlerRecent(0)}setScroll(t,e,n,o){const s=this.scrollEl.scrollLeft,i=this.scrollEl.scrollTop,r=n?(t-s)/10:0,l=n?(e-i)/10:0;this.scrollTimer=setTimeout((()=>{if(Math.abs(r)<=1&&Math.abs(l)<=1)return o!==u.LEFT_RIGHT&&o!==u.ALL||(this.scrollEl.scrollLeft=t),void(o!==u.UP_DOWN&&o!==u.ALL||(this.scrollEl.scrollTop=e));o!==u.LEFT_RIGHT&&o!==u.ALL||(this.scrollEl.scrollLeft=s+r),o!==u.UP_DOWN&&o!==u.ALL||(this.scrollEl.scrollTop=i+l),this.setScroll(t,e,n,o)}),0)}scroll(t,e){clearTimeout(this.scrollTimer);const n=this.scrollEl.clientWidth,o=this.scrollEl.clientHeight,s=this.scrollEl.scrollWidth-n,i=this.scrollEl.scrollHeight-o;if(i<=0&&s<=0)return;const{rangeX:r,rangeY:l}=this.getElementFocusPosition(),a=this.scrollEl.scrollTop,c=this.scrollEl.scrollLeft,{rangeX:h,rangeY:f}=this.getElementPosition(this.scrollEl),d=this.isLocalRolling?l.end-f.start+a:l.end,m=this.isLocalRolling?l.start-f.start+a:l.start,p=this.isLocalRolling?r.end-h.start+c:r.end,g=this.isLocalRolling?r.start-h.start+c:r.start;if(m-a>=0&&d-a<=o&&g-c>=0&&p-c<=n&&!this.distanceToCenter)return;const v=this.distanceToCenter?n/2-(r.end-r.start)/2:this.offsetDistance,E=this.distanceToCenter?o/2-(l.end-l.start)/2:this.offsetDistance;let b=p-n+v,y=d-o+E;m-a<0&&(y=m-E),g-c<0&&(b=g-v),b>s&&(b=s),b<0&&(b=0),y>i&&(y=i),y<0&&(y=0),e!==u.LEFT_RIGHT||m-a>=0&&d-a<=o||(e=2),e!==u.UP_DOWN||g-c>=0&&p-c<=n||(e=2),this.setScroll(b,y,t,e)}onFocus(t,e=!1,n=u.ALL){if(!t)return;const o=this.getFocusEl();o&&(o.removeAttribute(this.focusedAttrname),o.classList.remove(this.focusClassName));const s=t.getAttribute("class")||"";t.setAttribute(this.focusedAttrname,""),t.setAttribute("class",s+" "+this.focusClassName),a(this.getFocusEl(),{type:"onFocus"}),this.tabScrollEl(),this.scroll(e,n)}tabScrollEl(){let t=null;t=document.querySelectorAll(`[${this.scrollItemAttrname}]`),t.forEach(((t,e)=>{this.isLocalRolling=t.contains(this.getFocusEl()),this.scrollEl=this.isLocalRolling?t:document.documentElement||document.body.parentNode})),t=null}onKeyDownEvent(t){switch(t.preventDefault(),t.stopPropagation(),t.keyCode){case c.UP:this.handleDirection(!1,"up","handlerUpDown");break;case c.DOWN:this.handleDirection(!0,"down","handlerUpDown");break;case c.LEFT:this.handleDirection(!1,"left","handlerLeftRight");break;case c.RIGHT:this.handleDirection(!0,"right","handlerLeftRight");break;case c.ENTER:!this.longPressTimer&&!this.isLongPress&&(this.longPressTimer=setTimeout(this.longPress,500));break;default:break}}onKeyUpEvent(t){switch(clearTimeout(this.longPressTimer),t.keyCode){case c.ENTER:!this.isLongPress&&a(this.getFocusEl(),{type:"click"}),this.isLongPress&&(this.isLongPress=!1);break;default:break}this.longPressTimer=0,this.longPressFn=void 0}setLimitingEl(t){this.limitingEl=t}resetLimitingEl(){this.limitingEl=null}}var f=h;const d=Symbol(),m=new f;document.removeEventListener("keydown",m.onKeyDownEvent.bind(m),!1),document.addEventListener("keydown",m.onKeyDownEvent.bind(m)),document.removeEventListener("keyup",m.onKeyUpEvent.bind(m),!1),document.addEventListener("keyup",m.onKeyUpEvent.bind(m));var p={install:t=>{t.directive("focusable",{beforeMount(t){if(!t)return;t.setAttribute(m.focusItemAttrname,"");const e=t.getAttribute("class")||"";-1!==e.split(" ").indexOf(m.focusClassName)&&t.setAttribute(m.focusedAttrname,"")}}),t.directive("focusable-scroll",{beforeMount(t){t&&t.setAttribute(m.scrollItemAttrname,"")}}),t.provide(d,m)}};const g=()=>(0,o.f3)(d,m)}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,s,i){if(!o){var r=1/0;for(u=0;u<t.length;u++){o=t[u][0],s=t[u][1],i=t[u][2];for(var l=!0,a=0;a<o.length;a++)(!1&i||r>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(l=!1,i<r&&(r=i));if(l){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[o,s,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/about.c06a1e28.js"}}(),function(){n.miniCssF=function(t){return"css/about.9ead153e.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="tv-focus-example:";n.l=function(o,s,i,r){if(t[o])t[o].push(s);else{var l,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==o||h.getAttribute("data-webpack")==e+i){l=h;break}}l||(a=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",e+i),l.src=o),t[o]=[s];var f=function(e,n){l.onerror=l.onload=null,clearTimeout(d);var s=t[o];if(delete t[o],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach((function(t){return t(n)})),e)return e(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),a&&document.head.appendChild(l)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t=function(t,e,n,o){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var i=function(i){if(s.onerror=s.onload=null,"load"===i.type)n();else{var r=i&&("load"===i.type?"missing":i.type),l=i&&i.target&&i.target.href||e,a=new Error("Loading CSS chunk "+t+" failed.\n("+l+")");a.code="CSS_CHUNK_LOAD_FAILED",a.type=r,a.request=l,s.parentNode.removeChild(s),o(a)}};return s.onerror=s.onload=i,s.href=e,document.head.appendChild(s),s},e=function(t,e){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var s=n[o],i=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===t||i===e))return s}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){s=r[o],i=s.getAttribute("data-href");if(i===t||i===e)return s}},o=function(o){return new Promise((function(s,i){var r=n.miniCssF(o),l=n.p+r;if(e(r,l))return s();t(o,l,s,i)}))},s={143:0};n.f.miniCss=function(t,e){var n={443:1};s[t]?e.push(s[t]):0!==s[t]&&n[t]&&e.push(s[t]=o(t).then((function(){s[t]=0}),(function(e){throw delete s[t],e})))}}(),function(){var t={143:0};n.f.j=function(e,o){var s=n.o(t,e)?t[e]:void 0;if(0!==s)if(s)o.push(s[2]);else{var i=new Promise((function(n,o){s=t[e]=[n,o]}));o.push(s[2]=i);var r=n.p+n.u(e),l=new Error,a=function(o){if(n.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var i=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,s[1](l)}};n.l(r,a,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,i,r=o[0],l=o[1],a=o[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(a)var u=a(n)}for(e&&e(o);c<r.length;c++)i=r[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},o=self["webpackChunktv_focus_example"]=self["webpackChunktv_focus_example"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3902)}));o=n.O(o)})();
//# sourceMappingURL=app.40acd044.js.map